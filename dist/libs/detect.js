'use strict';
var __importDefault =
  (this && this.__importDefault) ||
  function (mod) {
    return mod && mod.__esModule ? mod : { default: mod };
  };
Object.defineProperty(exports, '__esModule', { value: true });
var constants_1 = require('../constants');
var brower_1 = require('../utils/brower');
var parser_1 = __importDefault(require('./parser'));
var UADetect = (function () {
  function UADetect(ua) {
    var _this = this;
    this.reset = function (ua) {
      _this.parser.reset(ua);
      return _this;
    };
    this.isMobile = function (ua) {
      var device = ua ? _this.parser.getDevice(ua) : _this.parser.device;
      switch (device.type) {
        case constants_1.DEVICE_TYPES.MOBILE:
        case constants_1.DEVICE_TYPES.TABLET:
          return true;
        default:
          return false;
      }
    };
    this.isSafari = function (ua, onlyMobile) {
      if (onlyMobile === void 0) {
        onlyMobile = false;
      }
      var browser = ua ? _this.parser.getBrowser(ua) : _this.parser.browser;
      switch (browser.name) {
        case constants_1.BROWSER_TYPES.SAFARI:
          return !onlyMobile;
        case constants_1.BROWSER_TYPES.MOBILE_SAFARI:
          return true;
        default:
          return false;
      }
    };
    this.isFirefox = function (ua) {
      var browser = ua ? _this.parser.getBrowser(ua) : _this.parser.browser;
      return browser.name === constants_1.BROWSER_TYPES.FIREFOX;
    };
    this.isIE = function (ua) {
      var browser = ua ? _this.parser.getBrowser(ua) : _this.parser.browser;
      switch (browser.name) {
        case constants_1.BROWSER_TYPES.INTERNET_EXPLORER:
        case constants_1.BROWSER_TYPES.IE:
          return true;
        default:
          return false;
      }
    };
    this.isEdge = function (ua, type) {
      var isChromium = _this.isEdgeChromium(ua || _this.parser.userAgent);
      switch (type) {
        case 'Chromium':
          if (isChromium) return true;
          break;
        case 'Legacy':
          if (isChromium) return false;
          break;
      }
      var browser = ua ? _this.parser.getBrowser(ua) : _this.parser.browser;
      return browser.name === constants_1.BROWSER_TYPES.EDGE;
    };
    this.isWindows = function (ua, onlyMobile) {
      if (onlyMobile === void 0) {
        onlyMobile = false;
      }
      var os = ua ? _this.parser.getOS(ua) : _this.parser.os;
      return (
        os.name === (onlyMobile ? constants_1.OS_TYPES.WINDOWS_PHONE : constants_1.OS_TYPES.WINDOWS)
      );
    };
    this.isAndroid = function (ua) {
      var os = ua ? _this.parser.getOS(ua) : _this.parser.os;
      return os.name === constants_1.OS_TYPES.ANDROID;
    };
    this.isMac = function (ua) {
      var os = ua ? _this.parser.getOS(ua) : _this.parser.os;
      return os.name === constants_1.OS_TYPES.MAC_OS;
    };
    this.isIOS = function (ua) {
      var os = ua ? _this.parser.getOS(ua) : _this.parser.os;
      return os.name === constants_1.OS_TYPES.IOS || _this.isIOS13('iPad');
    };
    this.isIOS13 = function (type) {
      var nav = brower_1.getNavigator();
      if (!nav) return false;
      var platform = nav.platform;
      if (!platform) return false;
      return (
        (type ? platform.indexOf(type) !== -1 : /iPad|iPhone|iPod/.test(platform)) ||
        (platform === 'MacIntel' && nav.maxTouchPoints > 1 && !window.MSStream)
      );
    };
    this.isMIUI = function (ua) {
      var browser = ua ? _this.parser.getBrowser(ua) : _this.parser.browser;
      return browser.name === constants_1.BROWSER_TYPES.MIUI;
    };
    this.isElectron = function (ua) {
      var _ua = (ua || _this.parser.userAgent).toLowerCase();
      return _ua ? /electron/.test(_ua) : false;
    };
    this.isPad = function (ua) {
      var device = ua ? _this.parser.getDevice(ua) : _this.parser.device;
      return (device.type = constants_1.DEVICE_TYPES.TABLET) || _this.isIOS13('iPad');
    };
    this.isWechat = function (ua, type) {
      if (type === void 0) {
        type = 'mobile';
      }
      var browser = ua ? _this.parser.getBrowser(ua) : _this.parser.browser;
      switch (browser.name) {
        case constants_1.BROWSER_TYPES.WECHAT:
          return !(type !== 'mobile');
        case constants_1.BROWSER_TYPES.WECHAT_DESKTOP:
          return !(type !== 'desktop');
        default:
          return false;
      }
    };
    this.isEdgeChromium = function (ua) {
      var _ua = ua || _this.parser.userAgent;
      return _ua.indexOf('Edg/') !== -1;
    };
    this.parser = new parser_1.default(ua);
  }
  return UADetect;
})();
exports.default = UADetect;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGV0ZWN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2xpYnMvZGV0ZWN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsMENBQXFFO0FBRXJFLDBDQUErQztBQUUvQyxvREFBZ0M7QUFFaEM7SUFFRSxrQkFBWSxFQUFXO1FBQXZCLGlCQUVDO1FBRU0sVUFBSyxHQUFHLFVBQUMsRUFBVztZQUN6QixLQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUN0QixPQUFPLEtBQUksQ0FBQztRQUNkLENBQUMsQ0FBQztRQUVLLGFBQVEsR0FBRyxVQUFDLEVBQVc7WUFDNUIsSUFBTSxNQUFNLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUM7WUFDbkUsUUFBUSxNQUFNLENBQUMsSUFBSSxFQUFFO2dCQUNuQixLQUFLLHdCQUFZLENBQUMsTUFBTSxDQUFDO2dCQUN6QixLQUFLLHdCQUFZLENBQUMsTUFBTTtvQkFDdEIsT0FBTyxJQUFJLENBQUM7Z0JBQ2Q7b0JBQ0UsT0FBTyxLQUFLLENBQUM7YUFDaEI7UUFDSCxDQUFDLENBQUM7UUFFSyxhQUFRLEdBQUcsVUFBQyxFQUFXLEVBQUUsVUFBa0I7WUFBbEIsMkJBQUEsRUFBQSxrQkFBa0I7WUFDaEQsSUFBTSxPQUFPLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFJLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUM7WUFDdEUsUUFBUSxPQUFPLENBQUMsSUFBSSxFQUFFO2dCQUNwQixLQUFLLHlCQUFhLENBQUMsTUFBTTtvQkFDdkIsT0FBTyxDQUFDLFVBQVUsQ0FBQztnQkFDckIsS0FBSyx5QkFB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
